name: ppocr_v4_rec_run_stream_fp16

frontend:
  shape:
    x:
      - 1
      - 3
      - 48
      - 320
  type: onnx
  checkpoint: /path/to/ch_PP-OCRv4_rec_infer/rec_model.onnx
  dtype: fp32

backend:
  type: tvm_vacc
  dtype: fp16
  quantize:
    calibrate_mode: percentile
    quantize_per_channel: true
    skip_conv_layers: [1,2,3,5,6,7,8,9,10,11,12,13,14,15,16,17,19,20,21,22,25,26,28,29,30,32,33,36,37,38,39,40,41,43,44,45,46]
    skip_matmul_layers: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18]
    requant_suppress: true
    quantize_mode: force_auto
    ops_usingfp:
      - concatenate
  compile:
    data_type: 0
    opt_level: 2
    data_transport_mode: 1
    mem_inplace: true

dataset:
  type: tvm
  path: /path/to/CUTE80/img
  sampler:
    suffix: png
    get_data_num: 50
  process_ops:
  - type: DecodeImage
  - type: Resize
    size:
    - 48
    - 320
  - type: Normalize
    div255: true
    mean:
    - 0.5
    - 0.5
    - 0.5
    std:
    - 0.5
    - 0.5
    - 0.5
  - type: ToTensor

workspace:
  path: ./deploy_weights

